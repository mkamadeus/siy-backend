before_script:
  - docker login $DOCKER_REGISTRY -u $DOCKER_USERNAME -p $DOCKER_PASSWORD

build-staging:
  stage: build
  script:
    - docker build -t $DOCKER_USERNAME/siy-backend:latest .
    - docker push $DOCKER_USERNAME/siy-backend:latest
  only:
    - main
    - f/deployment
    - develop

build-production:
  stage: build
  script:
    - docker build -t $DOCKER_USERNAME/siy-backend:production .
    - docker push $DOCKER_USERNAME/siy-backend:production
  only:
    - main
