before_script:
  - echo "$DOCKER_PASSWORD" | docker login $DOCKER_REGISTRY --username $DOCKER_USERNAME --password-stdin

build-staging:
  stage: build
  script:
    - docker build -t $DOCKER_USERNAME/siy-backend:latest .
    - docker push $DOCKER_USERNAME/siy-backend:latest
  only:
    - main
    - f/deployment
    - develop

build-production:
  stage: build
  script:
    - docker build -t $DOCKER_USERNAME/siy-backend:production .
    - docker push $DOCKER_USERNAME/siy-backend:production
  only:
    - main
